
let maleApartments= [
    {
        "id": 1,
        "imageUrl": "images/the_cove.jpg",
        "name": "The Cove",
        "address": "220 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1750,
        "rating": 4.5,
        "attributes": ["laundry", "gym", "music"]
    },
    {
        "id": 2,
        "imageUrl": "images/the_lodge.jpg",
        "name": "The Lodge",
        "address": "538 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1610,
        "rating": 3.8,
        "attributes": ["gym", "laundry", "music"],
    },
    {
        "id": 3,
        "imageUrl": "images/nauvoo-house-apartments-rexburg-id-primary-photo.jpg",
        "name": "Nauvoo Housing",
        "address": "175 W 5h S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price":1500,
        "rating": 4.2,
        "attributes": ["gym", "laundry","music"]
    },
    {
        "id": 4,
        "imageUrl": "images/Northpoint.webp",
        "name": "North Point",
        "address": "141 S 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1675,
        "rating": 4.0,
        "attributes": ["laundry", "gym", "music"]
    },
    {
        "id": 5,
        "imageUrl": "images/ridge.webp",
        "name": "The Ridge",
        "address": "291 E 7th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1799,
        "rating": 4.7,
        "attributes": ["laundry", "gym","private room"]
    },
    {
        "id": 6,
        "imageUrl": "images/the_landing.jpg",
        "name": "The Landing",
        "address": "359 W 4th W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1670,
        "rating": 3.5,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 7,
        "imageUrl": "images/DBImageHandler.ashx.jpeg",
        "name": "Centre Square",
        "address": "650 S 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83340",
        "price": 1550,
        "rating": 4.8,
        "attributes": ["gym", "laundry", "music"]
    },
    {
        "id": 8,
        "imageUrl": "images/Crestwood.ashx.jpeg",
        "name": "Crestwood House",
        "address": "235 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 895,
        "rating": 3.0,
        "attributes": ["house"]
    },
    {
        "id": 9,
        "imageUrl": "images/ColonialHeights.ashx.jpeg",
        "name": "Colonial Heights Townhouses",
        "address": "251 E 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 900,
        "rating": 3.2,
        "attributes": []
    },
    {
        "id": 10,
        "imageUrl": "images/Riviera.ashx.jpeg",
        "name": "Riviera Apartments",
        "address": "245 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1025,
        "rating": 3.6,
        "attributes": []
    },
    {
        "id": 11,
        "imageUrl": "images/CrestwoodApartments.ashx.jpeg",
        "name": "Crestwood Apartments",
        "address": "235 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 995,
        "rating": 3.0,
        "attributes": []
    },
    {
        "id": 12,
        "imageUrl": "images/Cottonwood.ashx.jpeg",
        "name": "Cottonwood",
        "address": "42 S 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 995,
        "rating": 3.0,
        "attributes": ["music"]
    },
    {
        "id": 13,
        "imageUrl": "images/Bunkhouse.ashx.jpeg",
        "name": "Bunkhouse",
        "address": "156 W 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1045,
        "rating": 3.4,
        "attributes": ["music"]
    },
    {
        "id": 14,
        "imageUrl": "images/Alldredge.ashx.jpeg",
        "name": "Alldredge House",
        "address": "243 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1045,
        "rating": 3.4,
        "attributes": ["house, laundry"]
    },
    {
        "id": 15,
        "imageUrl": "images/Bountiful.jpeg",
        "name": "Bountiful Place",
        "address": "345 W 5th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 995,
        "rating": 3.0,
        "attributes": []
    },
    {
        "id": 16,
        "imageUrl": "images/AlpineChalet.jpeg",
        "name": "Alpine Chalet",
        "address": "460 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1075,
        "rating": 3.5,
        "attributes": []
    },
    {
        "id": 17,
        "imageUrl": "images/ArcadiaApartments.jpeg",
        "name": "Arcadia Apartments",
        "address": "138 W 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1025,
        "rating": 3.6,
        "attributes": ["gym", "laundry"]
    },
    {
        "id": 18,
        "imageUrl": "images/Briarwood.jpeg",
        "name": "Briarwood Apartments",
        "address": "163 E 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1102,
        "rating": 3.8,
        "attributes": ["laundry"]
    },
    {
        "id": 19,
        "imageUrl": "images/Spori.jpeg",
        "name": "Spori Villa",
        "address": "174 College Ave",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1050,
        "rating": 3.5,
        "attributes": ["laundry", "private room","house"]
    },
    {
        "id": 20,
        "imageUrl": "images/BlueDoor.jpeg",
        "name": "The Blue Door",
        "address": "123 Princeton Ct",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1050,
        "rating": 3.5,
        "attributes": ["music", "laundry"]
    },
    {
        "id": 21,
        "imageUrl": "images/RedDoor.jpeg",
        "name": "The Red Door",
        "address": "135 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1060,
        "rating": 3.6,
        "attributes": ["music", "laundry"]
    },
    {
        "id": 22,
        "imageUrl": "images/Avonlea.jpeg",
        "name": "Avonlea",
        "address": "175 W 3rd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1190,
        "rating": 4.0,
        "attributes": []
    },
    {
        "id": 23,
        "imageUrl": "images/Pines.jpeg",
        "name": "The Pines",
        "address": "140 W 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1100,
        "rating": 4.0,
        "attributes": ["gym","music"]
    },
    {
        "id": 24,
        "imageUrl": "images/Clarke.jpeg",
        "name": "Clarke Apartments",
        "address": "156 S Center St",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1095,
        "rating": 4.0,
        "attributes": ["laundry"]
    },
    {
        "id": 25,
        "imageUrl": "images/DeltaPhi.jpeg",
        "name": "Delta Phi Apartments",
        "address": "139 Viking Dr",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1145,
        "rating": 4.2,
        "attributes": []
    },
    {
        "id": 26,
        "imageUrl": "images/AllenSunrise.jpeg",
        "name": "Allen's Sunrise Village",
        "address": "48 W 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1150,
        "rating": 4.2,
        "attributes": ["laundry"]
    },
    {
        "id": 27,
        "imageUrl": "images/BirchPlaza.jpeg",
        "name": "Birch Plaza",
        "address": "236 S 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1425,
        "rating": 4.5,
        "attributes": ["gym", "music"]
    },
    {
        "id": 28,
        "imageUrl": "images/Georgetown.jpeg",
        "name": "Georgetown Apartments",
        "address": "145 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1105,
        "rating": 4.0,
        "attributes": []
    },
    {
       "id": 29,
        "imageUrl": "images/Greenbrier.jpeg",
        "name": "Greenbrier",
        "address": "129 Princeton Ct",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1130,
        "rating": 4.1,
        "attributes": ["laundry"]
    },
    {
        "id": 30,
        "imageUrl": "images/MountainCrest.jpeg",
        "name": "Mountain Crest",
        "address": "132 S 3rd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1170,
        "rating": 4.1,
        "attributes": ["laundry"]
    },
    {
        "id": 31,
        "imageUrl": "images/Rockland.jpeg",
        "name": "Rockland Apartments",
        "address": "235 W 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1317,
        "rating": 4.3,
        "attributes": []
    },
    {
        "id": 32,
        "imageUrl": "images/kensington_manor.jpg",
        "name": "Kensington Manor",
        "address": "345 S 2nd E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1175,
        "rating": 4.1,
        "attributes": ["gym","music"]
    },
    {
        "id": 33,
        "imageUrl": "images/LaJolla.jpeg",
        "name": "La Jolla",
        "address": "65 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1179,
        "rating": 4.1,
        "attributes": ["laundry","gym","music"]
    },
    {
        "id": 34,
        "imageUrl": "images/Somerset.jpeg",
        "name": "Somerset Apartments",
        "address": "480 S 1st W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1200,
        "rating": 4.2,
        "attributes": ["gym","music"]
    },
    {
        "id": 35,
        "imageUrl": "images/AmericanAvenue.jpeg",
        "name": "American Avenue",
        "address": "151 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1460,
        "rating": 4.6,
        "attributes": ["private room","laundry"]
    },
    {
        "id": 36,
        "imageUrl": "images/Hillcrest.jpeg",
        "name": "Hillcrest Townhouses",
        "address": "465 S 2nd E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1460,
        "rating": 4.6,
        "attributes": ["private room","gym"]
    },
    {
        "id": 37,
        "imageUrl": "images/JacobHouse.jpeg",
        "name": "Jacob's House",
        "address": "149 E 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1240,
        "rating": 4.3,
        "attributes": ["laundry","house"]
    },
    {
        "id": 38,
        "imageUrl": "images/ParkView.jpeg",
        "name": "Park View Apartments",
        "address": "154 S 3rd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1450,
        "rating": 4.5,
        "attributes": ["gym","music","laundry","private room"]
    },
    {
        "id": 39,
        "imageUrl": "images/Creekside.jpeg",
        "name": "Creekside Cottages",
        "address": "278 steiner Ave",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1400,
        "rating": 4.4,
        "attributes": ["private room","house","laundry"]
    },
    {
        "id": 40,
        "imageUrl": "images/GreenbrierHouse.jpeg",
        "name": "Greenbrier House",
        "address": "129 Princeton Ct",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1330,
        "rating": 4.3,
        "attributes": ["house","laundry"]
    },
    {
        "id": 41,
        "imageUrl": "images/PinnaclePoint.jpeg",
        "name": "Pinnacle Point",
        "address": "51 S 1st E",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1350,
        "rating": 4.3,
        "attributes": ["gym","music"]
    },
    {
        "id": 42,
        "imageUrl": "images/Brighton.jpeg",
        "name": "Brighton Apartments",
        "address": "242 W 6th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1400,
        "rating": 4.4,
        "attributes": ["private room","laundry"]
    },
    {
        "id": 43,
        "imageUrl": "images/UniversityView.jpeg",
        "name": "University View",
        "address": "649 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1400,
        "rating": 4.5,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 44,
        "imageUrl": "images/Shelbourne.jpeg",
        "name": "Shelbourne Apartments",
        "address": "570 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1495,
        "rating": 4.6,
        "attributes": ["gym","laundry","private room"]
    },
    {
        "id": 45,
        "imageUrl": "images/ColonialHouse.jpeg",
        "name": "Colonial House",
        "address": "151 W 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1445,
        "rating": 4.7,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 46,
        "imageUrl": "images/Heritage.jpeg",
        "name": "Heritage",
        "address": "129 W 4th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1480,
        "rating": 4.8,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 47,
        "imageUrl": "images/Cedars.jpeg",
        "name": "The Cedars",
        "address": "120 W 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1620,
        "rating": 4.9,
        "attributes": ["gym","music"]
    },
    {
        "id": 48,
        "imageUrl": "images/Towers.jpeg",
        "name": "Towers",
        "address": "333 W 6th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1550,
        "rating": 4.8,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 49,
        "imageUrl": "images/Sundance.jpeg",
        "name": "Sundance",
        "address": "266 W 3rd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1645,
        "rating": 4.9,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 50,
        "imageUrl": "images/Pincock.jpeg",
        "name": "Pincock House",
        "address": "163 E 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1695,
        "rating": 4.9,
        "attributes": ["house","laundry","private room"]
    },
    {
        "id": 51,
        "imageUrl": "images/Abri.jpeg",
        "name": "Abri Apartments",
        "address": "220 E 1st S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1725,
        "rating": 4.9,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 52,
        "imageUrl": "images/Gates.jpeg",
        "name": "The Gates",
        "address": "370 W 7th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1820,
        "rating": 4.9,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 53,
        "imageUrl": "images/WindsorManor.jpeg",
        "name": "Windsor Manor",
        "address": "125 E 2nd S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1850,
        "rating": 4.9,
        "attributes": ["gym","laundry","music"]
    },
    {
        "id": 54,
        "imageUrl": "images/Camden.jpeg",
        "name": "Camden Apartments",
        "address": "225 W 5th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1750,
        "rating": 4.9,
        "attributes": ["private room"]
    },
    {
        "id": 55,
        "imageUrl": "images/MilanoFlats.jpeg",
        "name": "Milano Flats",
        "address": "440 S 2nd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1795,
        "rating": 4.9,
        "attributes": ["gym","private room","music"]
    },
    {
        "id": 56,
        "imageUrl": "images/Brookside.jpeg",
        "name": "Brookside Village",
        "address": "487 S 3rd W",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1775,
        "rating": 4.9,
        "attributes": ["gym","private room","music"]
    },
    {
        "id": 57,
        "imageUrl": "images/AutumnWinds.jpeg",
        "name": "Autumn Winds",
        "address": "160 W 5th S",
        "city": "Rexburg",
        "state": "ID",
        "zip": "83440",
        "price": 1875,
        "rating": 4.9,
        "attributes": ["private room","laundry"]
    }
];

let femaleApartments = [];
function output(data){
    const outputListElement = document.querySelector("#productbox_container");
    data.forEach(item => {
        outputListElement.innerHTML += `<a href="#"><div class="productbox">
        <img src="${item.imageUrl}" alt=${item.name}>
        <h3>${item.name}</h3>
        <p>$${item.price}/Semester<p>
        <h4>${item.rating} / 5</h4>
        </div></a>`;       
    });
}
function Reset(){
    document.querySelector("#productbox_container").innerHTML = "";
}
function obj_sort_asc(a,b){
    if (a.price < b.price) {
        return -1;
    } else if (a.price > b.price){
        return 1;
    } else{
        return 0;
    }
}
function obj_sort_dsc(a,b){
    if(a.price < b.price) {
        return 1;
    } else if (a.price > b.price){
        return -1;
    } else{
        return 0;
    }
}
function sortPriceAsc(){
    Reset();
    maleApartments.sort(obj_sort_asc);
    output(maleApartments);
}
function sortPriceDsc(){
    Reset();
    maleApartments.sort(obj_sort_dsc);
    output(maleApartments);
}

// function filterByGym(){
//     Reset();
//     const filteredApartments = apartments.filter(apartment => apartment.amenities.includes("gym"));
//     output(filteredApartments);
// }

// function filterByWasherDryer(){
//     Reset();
//     const filteredApartments = apartments.filter(apartment => apartment.amenities.includes("Washer/Dryer"));
//     output(filteredApartments);
// }

// function filterByPrivateRoom() {
//     Reset();
//     const filteredApartments = apartments.filter(apartment => apartment.private_room === true);
//     output(filteredApartments);
// }

// function filterByHouse() {
//     Reset();
//     const filteredApartments = apartments.filter(apartment => apartment.house === true);
//     output(filteredApartments);
// }

// function filterByMusicRoom() {
//     Reset();
//     const filteredApartments = apartments.filter(apartment => apartment.amenities.includes("music room"));
//     output(filteredApartments);
// }

// function filters(){
//     var privateRoom = document.querySelector("#privateRoom");
//     var house = document.querySelector("#house");
//     var gym = document.querySelector("#exerciseRoom");
//     var washerDryer= document.querySelector("#washerDryer");
//     var musicRoom = document.querySelector("#musicRoom");
//     if (privateRoom.checked) {
//         filterByPrivateRoom();
//     } else if (house.checked) {
//         filterByHouse();
//     } else if (gym.checked) {
//         filterByGym();
//     } else if(washerDryer.checked){
//         filterByWasherDryer();
//     } else if(musicRoom.checked){
//         filterByMusicRoom();
//     }
//     else {
//         Reset();
//         output(apartments);
//     }
// }

function search(){
    Reset();
    var searchInput = document.querySelector("#search").value;
    var searchResults = maleApartments.filter(apartment => apartment.name.toLowerCase().includes(searchInput.toLowerCase()));
    output(searchResults);
}

let minValue = document.getElementById("priceMinValue");
let maxValue = document.getElementById("priceMaxValue");

const rangeFill = document.querySelector(".range-fill");

const inputElements = document.querySelectorAll("input[type='range']");


function validateRange(){
    let min = parseInt(inputElements[0].value);
    let max = parseInt(inputElements[1].value);

    if(min > max){
        inputElements[0].value = max;
        inputElements[1].value = min;
    }

    const minPercentage = (min / 2000) * 100;
    const maxPercentage = (max / 2000) * 100;
    rangeFill.style.left = minPercentage + "%";
    rangeFill.style.width = maxPercentage - minPercentage + "%";

    minValue.innerHTML = "$" + min;
    maxValue.innerHTML = "$" + max;
}

inputElements.forEach(element => {
    element.addEventListener("input", validateRange);
});

validateRange();

function filters(){
    // Select all checked checkboxes
    var checkboxes = document.querySelectorAll('input[type=checkbox]:checked');

    var gender = document.querySelector('#gender');
    
    // Extract the values of the checked checkboxes
    var checkedValues = Array.from(checkboxes).map(cb => cb.value);
    
    // Reset the state (clear previous filters)
    Reset();
    
    // Filter the apartments based on selected attributes
    var filteredApartments;
    if(gender.value === "1"){ 
        filteredApartments= maleApartments.filter(apartment => 
        checkedValues.every(attribute => apartment.attributes.includes(attribute))
        );
    }else{
        filteredApartments = femaleApartments.filter(apartment => 
            checkedValues.every(attribute => apartment.attributes.includes(attribute))
        );
    }

    filteredApartments = filteredApartments.filter(apartment => 
        apartment.price >= parseInt(inputElements[0].value) && apartment.price <= parseInt(inputElements[1].value));
    output(filteredApartments);

    document.querySelector("#ascending").addEventListener("click", () => {
        Reset();
        filteredApartments.sort(obj_sort_asc);
        output(filteredApartments);
    });

    document.querySelector("#descending").addEventListener("click", () => {
        Reset();
        filteredApartments.sort(obj_sort_dsc);
        output(filteredApartments);
    });
    
    // Output the filtered apartments 
    // if (checkedValues.length === 0) {
    //     Reset();
    //     if(document.querySelector("#gender").value === "1"){
    //         output(maleApartments);
    //     }else{
    //         output(femaleApartments);
    //     }
    // }
}

function clearFilter(){
    var checkedCheckboxes = document.querySelectorAll('input[type=checkbox]:checked');
    // Uncheck each checkbox
    checkedCheckboxes.forEach(cb => cb.checked = false);
    // Reset the range slider
    inputElements[0].value = 0;
    inputElements[1].value = 2000;
    rangeFill.style.left = "0%";
    rangeFill.style.width = "100%";
    minValue.innerHTML = "$0";
    maxValue.innerHTML = "$2000";
    Reset();
    filters();
}



document.querySelector("#filter").addEventListener("click", filters);
document.querySelector("#ascending").addEventListener("click", sortPriceAsc);
document.querySelector("#descending").addEventListener("click", sortPriceDsc);
document.querySelector("#searchButton").addEventListener("click", search);
document.querySelector("#clearFilter").addEventListener("click", clearFilter);
document.querySelector("#search").addEventListener("keyup", search);